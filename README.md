# Проект 2 "Поиск вакансий"

---

## Оглавление
<a id="content"></a>
1. [Описание](#description)
2. [Установка и настройка проекта](#instruction)
3. [Структура проекта](#structure)
4. [Абстрактные классы](#absclass)
5. [Классы и модули, примеры и тестирование](#class)
6. [Методы и функции, примеры и тестирование](#func)
7. [Модуль main для запуска и проверки проекта](#funcmain)
8. [Запуск и тестирование проекта](#launch)
9. [Лицензия](#license)

---

## Описание<a id="description"></a>
Проект для поиска и работы с вакансиями. В проекте реализованы классы и функциональность для получения данных по
вакансиям с сайта HeadHunter, работа с экземплярами вакансий, сохранение, добавление, удаление вакансий из файла.

---

## Установка и настройка проекта<a id="instruction"></a>

1. Клонируйте репозиторий:
```
git clone https://github.com/username/project-x.git
```
2. Перейдите в директорию проекта:
```
cd ваш_проект
```
3. Установите зависимости проекта:
```
poetry install
```

---

## Структура проекта<a id="structure"></a>
```
.
├── data - директория для хранения различных файлов с информацией
├── src
│ ├── __init__.py
│ ├── additional.py - модуль с дополнительными функциями
│ ├── base_api.py - абстрактный класс подключения и получения данных по api-запросам
│ ├── base_files.py - абстрактный класс работы с файлами
│ ├── head_hunter_api.py - класс-наследник для работы с api-запросами сайта HeadHunter
│ ├── json_saver.py - класс-наследник для работы с json-файлами
│ ├── vacancy - класс для работы с вакансиями
├── tests - в папке находятся тесты для каждого модуля с классами
│ ├── __init__.py
│ ├── conftest.py - модуль для фикстур
│ ├── test_additiona
│ ├── test_head_hunter_api.py
│ ├── test_json_saver.py
│ ├── test_vacancy.py
├── .flake8
├── .gitignore
├── main.py - модуль для проверки функционала и выдачи результата для пользователя
├── pyproject.toml
├── poetry.lock
└── README.md
```

---

## Абстрактные классы<a id="absclass"></a>
1. Абстрактный класс *BaseApi* представляет класс, описывающий базовые методы для подключения и получения данных
по api-запросам. 

В классе представлены следующие обязательные методы:
* *api_connect* - метод для подключения к api.
* *get_vacancies* - метод получения данных.

2. Абстрактный класс *BaseFiles* представляет класс, описывающий базовые методы для получения, добавления и удаления
данных из файлов.

В классе представлены следующие обязательные методы:
* *get_data_from_file* - метод для получения данных из файла.
* *add_data_to_file* - метод для добавления данных в файл.
* *delete_data_from_file* - метод для удаления данных из файла.

---


## Классы и модули, примеры их использования и тестирование<a id="class"></a>
1. Класс *HeadHunterApi* - класс-наследник для подключения и получения вакансий с сайта HeadHunter.

```
Пример создания экземпляра класса:
hh_api = HeadHunterApi()
```
Методы класса протестированы в модуле *test_head_hunter_api* в папке **tests**.

2. Класс *JsonSaver* - класс-наследник для получения данных из файла, удаления и добавления данных.

```
Пример создания экземпляра класса:
json_saver = JsonSaver()
```
Методы класса протестированы в модуле *test_json_saver* в папке **tests**.

3. Класс *Vacancy* - для работы с вакансиями.

```
Пример создания экземпляра класса:
new_vacancy = Vacancy("Python", "12", 100, 150, "Требования: опыт работы от 3 лет")
```
Методы класса протестированы в модуле *test_vacancy* в папке **tests**.

4. Модуль *additional* - модуль с дополнительным функционалом.

Функции протестированы в модуле *test_additional* в папке **tests**.

---

## Методы и функции, примеры и тестирование<a id="func"></a>
### Методы, геттеры для класса HeadHunterApi
1. Метод *__init__* для инициализации экземпляра класса. Содержит следующие атрибуты:
* __url - ссылка на сайт
* __headers - шапка с данными для запроса
* per_page - количество страниц с вакансиями
* __params - параметры запроса и страниц
* __vacancies - список с вакансиями

2. Геттеры для вызова и получения данных из полей атрибутов. Список геттеров:
* url - ссылка на сайт
```
Вызов метода: 
return self.__url
```
* headers - шапка с данными для запроса
```
Вызов метода: 
return self.__headers
```
* params - параметры запроса и страниц
```
Вызов метода: 
return self.__params
```
* vacancies - список с вакансиями
```
Вызов метода: 
return self.__vacancies
```

3. Приватный метод *__api_connect* для подключения по API, возвращает json-данные через get-запрос. Для метода
реализован геттер *api_connect*.
```
Вызов метода: 
return self.__api_connect()
```

4. Метод *get_vacancies* возвращает список словарей с вакансиями по заданному ключевому слову(keyword).
```
Вызов метода: 
hh_api = HeadHunterApi()
# Получение вакансий по запросу
hh_vacancies = hh_api.get_vacancies(search_query, 20)
```

### Методы для класса JsonSaver
1. Метод *__init__* инициализации экземпляра класса JsonSaver. Содержит следующие атрибуты:
* __file_path - путь, куда будут сохраняться файлы с данными

2. Геттер для вызова и получения данных из полей атрибутов:
* file_path - ссылка на сайт
```
Вызов метода: 
return self.__file_path
```

3. Метод *get_data_from_file* для получения данных из файла. Используется для вывода, добавления и удаления данных
из файла.
```
Вызов метода: 
# Создание экземпляра класса для работы с файлами
json_saver = JsonSaver()
# Получение данных из файла
vacancy_from_file = json_saver.get_data_from_file()
```

4. Метод *add_data_to_file* для добавления данных в файл.
```
Вызов метода: 
# Создание экземпляра класса для работы с файлами
json_saver = JsonSaver()
# Сохранение созданной вакансии
json_saver.add_data_to_file(экземпляр класса)
```

5. Метод *delete_data_from_file* для удаления данных из файла.
```
Вызов метода: 
# Создание экземпляра класса для работы с файлами
json_saver = JsonSaver()
# Удаление данных из файла
json_saver.delete_data_from_file(экземпляр класса)
```

### Методы для класса Vacancy
1. Метод *__init__* инициализации экземпляра класса Vacancy. Содержит следующие атрибуты:
* name - название вакансии
* url - ссылка на вакансию
* salary_from - зарплата от суммы
* salary_to - зарплата до суммы
* experience - опыт работы

2. Магический метод *__str__* для отображения информации об объекте класса. Используется при выводе вакансий через
print.

3. Магические методы для сравнения вакансий по средней зарплате. Список методов:
* __lt__ - метод сравнения <
* __le__ - метод сравнения <=
* __gt__ - метод сравнения >
* __ge__ - метод сравнения >=

```
Вызов метода: 
вакансия1 < вакансия2
вакансия1 <= вакансия2
вакансия1 > вакансия2
вакансия1 >= вакансия2
```

4. Метод *salary_average* расчета средней зарплаты вакансии. Необходим для сравнения зарплаты в диапазоне от начальной
суммы до конечной суммы.
```
Вызов метода: 
вакансия.salary_average()
```

5. Метод *process_vacancy* для обработки информации по вакансии из json-данных и формирования экземпляра класса. Метод
используется для формирования экземпляров класса из списка словарей.
```
Вызов метода: 
vacancies_json_info = {}
Vacancy.process_vacancy(vacancies_json_info)
```

6. Метод *cast_to_object_list* для создания списка экземпляров класса из списка словарей в json-формате. Метод
используется при получении json-данных из файла.
```
Вызов метода: 
vacancy_from_file = [{}]
Vacancy.cast_to_object_list(vacancy_from_file)
```

7. Метод *transform_to_dict* для преобразования экземпляра класса Vacancy в словарь. Используется при добавлении
экземпляра класса в файл.
```
Вызов метода: 
new_vacancy = Vacancy()
new_vacancy_to_dict = Vacancy.transform_to_dict(new_vacancy)
```

8. Статичные методы для проверки валидности строковых, числовых и классовых данных. Методы используются при
инициализации экземпляров класса Vacancy. Список методов:
* __verify_str_data - проверяет валидность строковых данных
* __verify_int_data - проверяет валидность целочисленных данных. Метод проверяет, что атрибут является
экземпляром класса int, не отрицательный
* __verify_salary_other - проверяет валидность зарплаты другого объекта класса Vacancy при сравнении зарплат

### Функционал модуля *additional*

1. Функция *get_top_vacancies* возвращает список вакансий, отсортированных по среднему значения зарплаты по убыванию.
Выводит определенное количество вакансий, если пользователь передал значение top_n. По умолчанию выводит все вакансии.
```
Вызов функции: 
top_vacancies = get_top_vacancies(список вакансий, количество вакансий для вывода)
```

2. Функция *print_vacancies* для вывода вакансий пользователю.
```
Вызов функции: 
print_vacancies(список вакансий из файла)
```

## Модуль main для запуска и проверки проекта<a id="funcmain"></a>
1. Модуль *main* необходим для проверки/тестирования всего функционала. Модуль для взаимодействия с пользователем.
В модуле проверяются следующие возможности: получение вакансий по ключевому запросу на сайте HeadHunter.ru,
вывод топ N ваканский по средней зарплате(N задает пользователь), добавление и удаление вакансий, сохранение
созданных вакансий в файл и вывод их из файла в консоль.
```
Вызов main:
# input("Введите поисковый запрос: ")
search_query = "Python Developer"
# int(input("Введите количество вакансий для вывода в топ N: "))
top_n = 3

# Создание экземпляра класса для выгрузки вакансий
hh_api = HeadHunterApi()
# Получение вакансий по запросу
hh_vacancies = hh_api.get_vacancies(search_query, 20)
# Формирование списка экземпляров класса вакансий из полученных данных
vacancies_list = Vacancy.cast_to_object_list(hh_vacancies)

# Вывод топ вакансий по средней зарплате
top_vacancies = get_top_vacancies(vacancies_list, top_n)
print("Отсортированные вакансии по средней зарплате:")
print_vacancies(top_vacancies)

new_vacancy = Vacancy("Python", "<https://hh.ru/vacancy/123456>", 100, 150, "Требования: опыт работы от 3 лет")
new_vacancy_to_delete = Vacancy("Java", "<https://hh.ru/vacancy/123457>", 120, 150, "Требования: ...")

# Создание экземпляра класса для работы с файлами
json_saver = JsonSaver()
# Формирование словаря из экземпляра класса для записи в файл
new_vacancy_to_dict = Vacancy.transform_to_dict(new_vacancy)
vacancy_to_dict = Vacancy.transform_to_dict(new_vacancy_to_delete)
# Сохранение созданной вакансии
json_saver.add_data_to_file(new_vacancy_to_dict)
json_saver.add_data_to_file(vacancy_to_dict)
# Получение данных из файла
vacancy_from_file = json_saver.get_data_from_file()
# Удаление данных из файла
json_saver.delete_data_from_file(vacancy_to_dict)
# Преобразование json-данных в экземпляр класса Vacancy
vacancy_from_file_list = Vacancy.cast_to_object_list(vacancy_from_file)

# Вывод вакансий в консоль
print("Список вакансий из файла:")
print_vacancies(vacancy_from_file_list)

Результат:
Отсортированные вакансии по средней зарплате:
Python разработчик (Project-based). Ссылка: https://hh.ru/vacancy/119101481.
Зарплата: от 15000000 до 25000000. Требуемый опыт: От 3 до 6 лет.

Middle Python Developer. Ссылка: https://hh.ru/vacancy/119472962.
Зарплата: от 15000000 до 20000000. Требуемый опыт: От 3 до 6 лет.

Middle DevOps специалист. Ссылка: https://hh.ru/vacancy/120012148.
Зарплата: от 13000000. Требуемый опыт: От 1 года до 3 лет.

Список вакансий из файла:
Python. Ссылка: <https://hh.ru/vacancy/123456>.
Зарплата: от 100 до 150. Требуемый опыт: Требования: опыт работы от 3 лет.

Java. Ссылка: <https://hh.ru/vacancy/123457>.
Зарплата: от 120 до 150. Требуемый опыт: Требования: ....
```

---

## Запуск и тестирование проекта<a id="launch"></a>
1. После установки и настройки проекта перейти в модуль main в корне проекта.
2. Запустить его с помощью кнопки *run* или консоли *python/python3 main.py*.

---

## Лицензия<a id="license"></a>

Этот проект лицензирован по [лицензии MIT](LICENSE).

##### [Оглавление](#content)